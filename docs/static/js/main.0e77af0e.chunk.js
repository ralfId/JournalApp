(this["webpackJsonpjournal-app"]=this["webpackJsonpjournal-app"]||[]).push([[0],{168:function(e,t,n){},169:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(32),r=n.n(c),i=n(8),o=n(9),s=n.n(o),u=n(13),l=n(21),d=n(22),j=n(10),b=n(36),p=n.n(b),O=n(28),m=(n(170),n(75),{apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_APIKEY,authDomain:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_AUTHDOMAIN,projectId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_PROJECTID,storageBucket:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_STORAGEBUCKET,messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_MESSAGINGSENDERID,appId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_APPID});O.a.initializeApp(m);var h=O.a.firestore(),f=new O.a.auth.GoogleAuthProvider,_=n(19),v=n.n(_),x="[Auth] Login",g="[Auth] Logout",N="[UI] Set Error",y="[UI] Remove Error",S="[UI] Start Loading",E="[UI] Finish Loading",w="[Notes] Add New Note",C="[Notes] Set Active Note",T="[Notes] Load Notes",P="[Notes] Refresh Updated Note",A="[Notes] Delete Note",D="[Notes] Logout Cleaning Notes",k=function(e){return{type:N,payload:e}},R=function(){return{type:y}},I=function(){return{type:E}},U=n(6),L=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.collection("".concat(t,"/journal/notes")).get();case 2:return n=e.sent,a=[],n.forEach((function(e){a.push(Object(U.a)({id:e.id},e.data()))})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,a,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"https://api.cloudinary.com/v1_1/dvupfwoil/image/upload",(n=new FormData).append("upload_preset","journal-app-ractjs"),n.append("file",t),e.next=7,fetch("https://api.cloudinary.com/v1_1/dvupfwoil/image/upload",{method:"POST",body:n});case 7:if(!(a=e.sent).ok){e.next=15;break}return e.next=11,a.json();case 11:return c=e.sent,e.abrupt("return",c.secure_url);case 15:return e.abrupt("return",null);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.log("uploadImage>>>>>>>>>>>>>>>>"+e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}(),W=function(e,t){return{type:C,payload:Object(U.a)({id:e},t)}},K=function(e,t){return{type:w,payload:Object(U.a)({id:e},t)}},H=function(e){return function(){var t=Object(u.a)(s.a.mark((function t(n){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L(e);case 3:a=t.sent,n(B(a)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("startLoadingNotes >>>>>>"+t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},B=function(e){return{type:T,payload:e}},V=function(e){return function(){var t=Object(u.a)(s.a.mark((function t(n,a){var c,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=a().auth.uid,e.imageUrl||delete e.imageUrl,delete(r=Object(U.a)({},e)).id,t.next=6,h.doc("/".concat(c,"/journal/notes/").concat(e.id)).update(r).catch((function(e){console.log(e.message),v.a.fire("Saved",e.message,"success")}));case 6:n(G(e.id,r)),v.a.fire({position:"top-end",icon:"success",title:"Your note has been saved",text:"".concat(e.title),showConfirmButton:!1,timer:1500});case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},G=function(e,t){return{type:P,payload:{id:e,note:Object(U.a)({id:e},t)}}},J=function(e){return{type:A,payload:{id:e}}},M=function(e,t){return function(n){return n({type:S}),O.a.auth().signInWithEmailAndPassword(e,t).then((function(e){var t=e.user;n(q(t.uid,t.displayName)),n(I())})).catch((function(e){n(I()),v.a.fire({icon:"error",title:"",text:e.message})}))}},q=function(e,t){return{type:x,payload:{uid:e,displayName:t}}},z=function(e){return{type:g}},X=n(35),Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a.useState)(e),n=Object(l.a)(t,2),c=n[0],r=n[1],i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;r(t)},o=function(e){var t=e.target;r(Object(U.a)(Object(U.a)({},c),{},Object(X.a)({},t.name,t.value)))};return[c,o,i]},Q=n(1),Z=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.ui})),n=t.msgError,a=t.loading,c=Y({email:"ralf_raid@yopmail.com",password:"123456"}),r=Object(l.a)(c,2),o=r[0],s=r[1],u=o.email,j=o.password,b=function(){return p.a.isEmail(u)?j.length<5?(e(k("password should be at least 6 characters")),!1):(e(R()),!0):(e(k("email is not valid")),!1)};return Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)("h3",{className:"auth__title",children:" Login Screen "}),Object(Q.jsxs)("form",{onSubmit:function(t){t.preventDefault(),b()&&e(M(u,j))},className:"animate__animated animate__fadeIn  animate__faster  ",children:[n&&Object(Q.jsx)("div",{className:"auth__alert-error",children:n}),Object(Q.jsx)("label",{htmlFor:"email",children:"Email"}),Object(Q.jsx)("input",{className:"auth__input",name:"email",type:"text",autoComplete:"off",value:u,onChange:s}),Object(Q.jsx)("label",{htmlFor:"password",children:"Password"}),Object(Q.jsx)("input",{className:"auth__input",name:"password",type:"password",autoComplete:"off",value:j,onChange:s}),Object(Q.jsx)("br",{}),Object(Q.jsx)("button",{className:"btn btn-primary btn-block",disabled:a,children:"SigIn"}),Object(Q.jsxs)("div",{className:"auth__social-networks",children:[Object(Q.jsx)("p",{children:"Login with social netwoks"}),Object(Q.jsxs)("div",{className:"google-btn",onClick:function(){e((function(e){O.a.auth().signInWithPopup(f).then((function(t){var n=t.user;e(q(n.uid,n.displayName))}))}))},children:[Object(Q.jsx)("div",{className:"google-icon-wrapper",children:Object(Q.jsx)("img",{className:"google-icon",src:"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg",alt:"google button"})}),Object(Q.jsx)("p",{className:"btn-text",children:Object(Q.jsx)("b",{children:"Sign in with google"})})]})]}),Object(Q.jsx)(d.b,{className:"link",to:"/auth/register",children:"Crate new acount"})]})]})},$=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.ui})).msgError,n=Y({name:"rafael",email:"ralf_raid@yopmail.com",password:"123456",confirmpassword:"123456"}),a=Object(l.a)(n,2),c=a[0],r=a[1],o=c.name,j=c.email,b=c.password,m=c.confirmpassword,h=function(){return 0===o.trim().length?(e(k("name is required")),!1):p.a.isEmail(j)?b!==m||b.length<5?(e(k("password should be at least 6 characters an match each other")),!1):(e(R()),!0):(e(k("email is not valid")),!1)};return Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)("h3",{className:"auth__title",children:" Register Screen "}),Object(Q.jsxs)("form",{onSubmit:function(t){t.preventDefault(),h()&&e(function(e,t,n){return function(a){O.a.auth().createUserWithEmailAndPassword(e,t).then(function(){var e=Object(u.a)(s.a.mark((function e(t){var c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.user,e.next=3,c.updateProfile({displayName:n});case 3:a(q(c.uid,c.displayName));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){v.a.fire("Error",e.message,"error")}))}}(j,b,o))},className:"animate__animated animate__fadeIn  animate__faster  ",children:[t&&Object(Q.jsx)("div",{className:"auth__alert-error",children:t}),Object(Q.jsx)("label",{htmlFor:"name",children:"Name"}),Object(Q.jsx)("input",{className:"auth__input",name:"name",value:o,type:"text",autoComplete:"off",onChange:r}),Object(Q.jsx)("label",{htmlFor:"email",children:"Email"}),Object(Q.jsx)("input",{className:"auth__input",name:"email",value:j,type:"text",autoComplete:"off",onChange:r}),Object(Q.jsx)("label",{htmlFor:"password",children:"Password"}),Object(Q.jsx)("input",{className:"auth__input",name:"password",value:b,type:"password",autoComplete:"off",onChange:r}),Object(Q.jsx)("label",{htmlFor:"password",children:"Confirm password"}),Object(Q.jsx)("input",{className:"auth__input",name:"confirmpassword",value:m,type:"password",autoComplete:"off",onChange:r}),Object(Q.jsx)("br",{}),Object(Q.jsx)("button",{className:"btn btn-primary btn-block mb-5 mt-5",children:"Register"}),Object(Q.jsx)(d.b,{className:"link ",to:"/auth/login",children:"Already register?"})]})]})},ee=function(){return Object(Q.jsx)("div",{className:"auth__main",children:Object(Q.jsx)("div",{className:"auth__box-container",children:Object(Q.jsxs)(j.d,{children:[Object(Q.jsx)(j.b,{path:"/auth/login",component:Z}),Object(Q.jsx)(j.b,{path:"/auth/register",component:$}),Object(Q.jsx)(j.a,{to:"/auth/login"})]})})})},te=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.notes})).active;return Object(Q.jsxs)("div",{className:"notes__appbar ",children:[Object(Q.jsx)("span",{children:" 28 de agosto de 2021"}),Object(Q.jsx)("input",{id:"fileSelector",type:"file",onChange:function(t){var n=t.target.files[0];e(function(e){return function(){var t=Object(u.a)(s.a.mark((function t(n,a){var c,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c=a().notes.active,v.a.fire({title:"Loading...",text:"Please wait...",allowOutsideClick:!1,showConfirmButton:!1,didOpen:function(){v.a.showLoading()}}),t.next=5,F(e);case 5:r=t.sent,c.imageUrl=r,n(V(c)),v.a.close(),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log("startUploadingImage >>>>>>>>>>>>"+t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}()}(n))},style:{display:"none"}}),Object(Q.jsxs)("div",{children:[Object(Q.jsx)("button",{className:"btn",onClick:function(){document.querySelector("#fileSelector").click()},children:"Picture"}),Object(Q.jsx)("button",{className:"btn",onClick:function(){e(V(t))},children:"Save"})]})]})},ne=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.notes})).active,n=Y(t),c=Object(l.a)(n,3),r=c[0],o=c[1],d=c[2],j=r.id,b=r.title,p=r.body,O=Object(a.useRef)(t.id);Object(a.useEffect)((function(){t.id!==O.current&&(d(t),O.current=t.id)}),[t,d]),Object(a.useEffect)((function(){e(W(r.id,Object(U.a)({},r)))}),[r,e]);return Object(Q.jsxs)("div",{className:"notes__main-content",children:[Object(Q.jsx)(te,{}),Object(Q.jsxs)("div",{className:"notes__content",children:[Object(Q.jsx)("label",{className:"mt-5 mb-1",htmlFor:"title",children:"Title"}),Object(Q.jsx)("input",{type:"text",placeholder:"Title",name:"title",className:"notes__title-input",value:b,onChange:o}),Object(Q.jsx)("label",{className:"mt-5 mb-1",htmlFor:"body",children:"Description"}),Object(Q.jsx)("textarea",{className:"notes__textarea ",name:"body",placeholder:"What happened today?",value:p,onChange:o}),Object(Q.jsx)("div",{className:"notes__image",children:t.imageUrl&&Object(Q.jsx)("img",{src:t.imageUrl,alt:"fantastic"})})]}),Object(Q.jsx)("button",{className:"btn btn-danger",onClick:function(){e(function(e){return function(){var t=Object(u.a)(s.a.mark((function t(n,a){var c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=a().auth.uid,v.a.fire({title:"Loading...",text:"Please wait...",allowOutsideClick:!1,showConfirmButton:!1,didOpen:function(){v.a.showLoading()}}),t.next=4,h.doc("".concat(c,"/journal/notes/").concat(e)).delete();case 4:n(J(e)),v.a.close();case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(j))},children:"Delete"})]})},ae=function(){return Object(Q.jsxs)("div",{className:"nothing__main-content animate__animated animate__fadeIn  animate__faster  ",children:[Object(Q.jsx)("p",{children:"Select somethin, or create a new entry"}),Object(Q.jsx)("i",{className:"far fa-star fa-4x mt-5"})]})},ce=n(64),re=n.n(ce),ie=function(e){var t=e.id,n=e.title,a=e.body,c=e.date,r=e.imageUrl,o=Object(i.b)(),s=re()(c);return Object(Q.jsxs)("div",{className:"journal__entry pointer animate__animated animate__fadeIn  animate__faster  ",onClick:function(){o(W(t,{title:n,body:a,date:c,imageUrl:r}))},children:[r&&Object(Q.jsx)("div",{className:"journal__entry-picture",style:{backgroundImage:"url(".concat(r,")"),backgroundSize:"cover"}}),Object(Q.jsxs)("div",{className:"journal__entry-body",children:[Object(Q.jsx)("div",{className:"journal__entry-title",children:n}),Object(Q.jsx)("div",{className:"journal__entry-content",children:a})]}),Object(Q.jsxs)("div",{className:"journal__date",children:[Object(Q.jsx)("span",{children:s.format("dddd")}),Object(Q.jsx)("h4",{children:s.format("Do")})]})]})},oe=function(){var e=Object(i.c)((function(e){return e.notes})).notes;return Object(Q.jsx)("div",{className:"journal__entries animate__animated animate__fadeIn  animate__faster  ",children:e.map((function(e){return Object(Q.jsx)(ie,Object(U.a)({},e),e.id)}))})},se=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.auth})).name;return Object(Q.jsxs)("aside",{className:"journal__sidebar",children:[Object(Q.jsxs)("div",{className:"journal__side-navbar",children:[Object(Q.jsxs)("h3",{className:"mt-5",children:[Object(Q.jsx)("i",{className:"far fa-moon"}),Object(Q.jsxs)("span",{children:["  ",t," "]})]}),Object(Q.jsx)("button",{className:"btn",onClick:function(){e(function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.auth().signOut();case 2:t(z()),t({type:D});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:"Logout"})]}),Object(Q.jsxs)("div",{className:"journal__new-entry",onClick:function(){e(function(){var e=Object(u.a)(s.a.mark((function e(t,n){var a,c,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n().auth.uid,c={title:"",body:"",date:(new Date).getTime()},e.prev=2,e.next=5,h.collection("".concat(a,"/journal/notes")).add(c).catch((function(e){v.a.fire("Saved",e.message,"success")}));case 5:r=e.sent,t(W(r.id,c)),t(K(r.id,c)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log("startNewNote>>>>>>>>>>>>>>>>>"+e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n){return e.apply(this,arguments)}}())},children:[Object(Q.jsx)("i",{className:"far fa-calendar-plus fa-3x"}),Object(Q.jsx)("p",{className:"mt-1",children:"New Entry"})]}),Object(Q.jsx)(oe,{})]})},ue=function(){var e=Object(i.c)((function(e){return e.notes})).active;return Object(Q.jsxs)("div",{className:"journal__main-content animate__animated animate__fadeIn  animate__faster  ",children:[Object(Q.jsx)(se,{}),Object(Q.jsx)("main",{children:e?Object(Q.jsx)(ne,{}):Object(Q.jsx)(ae,{})})]})},le=n(37),de=["isAuthenticated","component"],je=function(e){var t=e.isAuthenticated,n=e.component,a=Object(le.a)(e,de);return localStorage.setItem("lastPath",a.location.pathname),Object(Q.jsx)(j.b,Object(U.a)(Object(U.a)({},a),{},{component:function(e){return t?Object(Q.jsx)(n,Object(U.a)({},e)):Object(Q.jsx)(j.a,{to:"/auth/login"})}}))},be=["isAuthenticated","component"],pe=function(e){var t=e.isAuthenticated,n=e.component,a=Object(le.a)(e,be);return Object(Q.jsx)(j.b,Object(U.a)(Object(U.a)({},a),{},{component:function(e){return t?Object(Q.jsx)(j.a,{to:"/"}):Object(Q.jsx)(n,Object(U.a)({},e))}}))},Oe=function(){var e=Object(i.b)(),t=Object(a.useState)(!0),n=Object(l.a)(t,2),c=n[0],r=n[1],o=Object(a.useState)(!1),b=Object(l.a)(o,2),p=b[0],m=b[1];return Object(a.useEffect)((function(){O.a.auth().onAuthStateChanged(function(){var t=Object(u.a)(s.a.mark((function t(n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(null===n||void 0===n?void 0:n.uid)?(e(q(n.uid,n.displayName)),m(!0),e(H(n.uid))):m(!1),r(!1);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[e,r,p]),c?Object(Q.jsx)("h2",{children:"Wait..."}):Object(Q.jsx)(Q.Fragment,{children:Object(Q.jsx)(d.a,{children:Object(Q.jsx)("div",{children:Object(Q.jsxs)(j.d,{children:[Object(Q.jsx)(pe,{path:"/auth",isAuthenticated:p,component:ee}),Object(Q.jsx)(je,{exact:!0,path:"/",isAuthenticated:p,component:ue}),Object(Q.jsx)(j.a,{to:"/auth/login"})]})})})})},me=n(29),he=n(65),fe=n(46),_e={notes:[],active:null},ve={loading:!1,msgError:null},xe="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||me.c,ge=Object(me.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return{uid:t.payload.uid,name:t.payload.displayName};case g:return{};default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(U.a)(Object(U.a)({},e),{},{msgError:t.payload});case y:return Object(U.a)(Object(U.a)({},e),{},{msgError:null});case S:return Object(U.a)(Object(U.a)({},e),{},{loading:!0});case E:return Object(U.a)(Object(U.a)({},e),{},{loading:!1});default:return e}},notes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(U.a)(Object(U.a)({},e),{},{active:Object(U.a)({},t.payload)});case w:return Object(U.a)(Object(U.a)({},e),{},{notes:[t.payload].concat(Object(fe.a)(e.notes))});case T:return Object(U.a)(Object(U.a)({},e),{},{notes:Object(fe.a)(t.payload)});case P:return Object(U.a)(Object(U.a)({},e),{},{notes:e.notes.map((function(e){return e.id===t.payload.id?t.payload.note:e}))});case A:return Object(U.a)(Object(U.a)({},e),{},{active:null,notes:e.notes.filter((function(e){return e.id!==t.payload.id}))});case D:return Object(U.a)(Object(U.a)({},e),{},{active:null,notes:[]});default:return e}}}),Ne=Object(me.d)(ge,xe(Object(me.a)(he.a))),ye=function(){return Object(Q.jsx)(Q.Fragment,{children:Object(Q.jsx)(i.a,{store:Ne,children:Object(Q.jsx)(Oe,{})})})};n(168);r.a.render(Object(Q.jsx)(ye,{}),document.getElementById("root"))}},[[169,1,2]]]);
//# sourceMappingURL=main.0e77af0e.chunk.js.map